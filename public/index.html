<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
	<title>Dovedale Live Map</title>
	<script src="https://cdn.tailwindcss.com/3.4.16"></script>
	<link rel="stylesheet"
		href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
	<meta name="description" content="A live map of Dovedale Railway, showing players with a server selector." />
	<meta name="keywords" content="dovedale, railway, dovedale railway, dovedale map, live map, dovedale railway map" />
	<link rel="canonical" href="https://map.dovedale.wiki/" />

	<meta property="og:title" content="Dovedale Live Map" />
	<meta property="og:description"
		content="A live map of Dovedale Railway, showing players across all or a specific server." />
	<meta property="og:image" content="https://map.dovedale.wiki/images/map-small.png" />
	<meta property="og:url" content="https://map.dovedale.wiki/" />
	<meta name="twitter:card" content="summary_large_image" />
	<meta name="twitter:title" content="Dovedale Live Map" />
	<meta name="twitter:description"
		content="A live map of Dovedale Railway, showing players across all or a specific server." />
	<meta name="twitter:image" content="https://map.dovedale.wiki/images/map-small.png" />
	<style>
		.connection-popup {
			position: fixed;
			top: 20px;
			left: 50%;
			transform: translateX(-50%);
			z-index: 1000;
			background: rgba(0, 0, 0, 0.9);
			border: 1px solid #444;
			border-radius: 8px;
			padding: 16px 20px;
			backdrop-filter: blur(10px);
			box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
			transition: all 0.3s ease;
			max-width: 300px;
		}

		.connection-popup.hidden {
			opacity: 0;
			transform: translateX(-50%) translateY(-20px);
			pointer-events: none;
		}

		.popup-content {
			display: flex;
			align-items: center;
			gap: 12px;
			color: white;
		}

		.connection-icon {
			color: #ff4444;
			flex-shrink: 0;
		}

		.popup-message h3 {
			margin: 0 0 4px 0;
			font-size: 14px;
			font-weight: 600;
		}

		.popup-message p {
			margin: 0;
			font-size: 12px;
			color: #ccc;
		}

		.reconnect-btn {
			background: #0066cc;
			color: white;
			border: none;
			border-radius: 6px;
			padding: 8px 12px;
			font-size: 12px;
			font-weight: 500;
			cursor: pointer;
			display: flex;
			align-items: center;
			gap: 6px;
			transition: background-color 0.2s ease;
			white-space: nowrap;
		}

		.reconnect-btn:hover {
			background: #0052a3;
		}

		.reconnect-btn:disabled {
			background: #666;
			cursor: not-allowed;
		}

		.reconnect-btn.connecting {
			background: #666;
		}

		.reconnect-btn.connecting svg {
			animation: spin 1s linear infinite;
		}

		@keyframes spin {
			from {
				transform: rotate(0deg);
			}

			to {
				transform: rotate(360deg);
			}
		}
	</style>
</head>

<body class="bg-zinc-950 text-white text-xl overflow-hidden h-full w-full fixed">

	<div id="connectionPopup" class="connection-popup hidden">
		<div class="popup-content">
			<div class="connection-icon">
				<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
					<path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z" />
					<path d="m15 5 4 4" />
				</svg>
			</div>
			<div class="popup-message">
				<h3>Connection Lost</h3>
				<p>Unable to connect to the server</p>
			</div>
			<button id="reconnectBtn" class="reconnect-btn">
				<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
					<path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8" />
					<path d="M21 3v5h-5" />
					<path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16" />
					<path d="M3 21v-5h5" />
				</svg>
				Reconnect
			</button>
		</div>
	</div>

	<div class="fixed top-2 left-2 flex gap-3 items-center z-20">
		<select class="bg-zinc-800 px-2 py-1 rounded text-base sm:text-xl" id="servers"></select>
		<p id="players" class="hidden">Players: N/A</p>
	</div>

	<div class="fixed top-2 right-2 flex gap-2 sm:hidden z-20">
		<button id="zoom-in" class="bg-zinc-800 w-10 h-10 flex items-center justify-center rounded-full">
			<i class="material-symbols-outlined">add</i>
		</button>
		<button id="zoom-out" class="bg-zinc-800 w-10 h-10 flex items-center justify-center rounded-full">
			<i class="material-symbols-outlined">remove</i>
		</button>
	</div>

	<div class="w-full h-full">
		<canvas width="2867.7" height="1372.2"></canvas>
	</div>

	<dialog id="dialog" class="hidden p-3 bg-zinc-800 text-white rounded-2xl flex flex-col gap-5">
		<form class="flex gap-3 align-center justify-center" id="lever-form">
			<label class="content-center" for="box">Box:</label>
			<input class="bg-zinc-700 rounded w-20 px-2" type="text" id="box" name="name" required />
			<label class="content-center" for="lever">Lever:</label>
			<input class="bg-zinc-700 rounded w-20 px-2" type="number" id="lever" name="lever" required />
			<button class="bg-zinc-700 px-3 py-1 rounded-lg">Change</button>
		</form>
		<form method="dialog">
			<button class="bg-zinc-700 px-3 py-1 rounded-lg">Close</button>
		</form>
	</dialog>

	<div id="tooltip"
		class="pl-3 pr-3.5 py-3 bg-zinc-800 rounded-2xl inline-flex flex-col justify-start items-start gap-2.5 fixed hidden sm:max-w-md max-w-[90vw] z-20">
		<div id="player" class="inline-flex justify-center items-center gap-1.5">
			<span class="material-symbols-outlined">person</span>
			<div class="text-xl">MrToes_guy</div>
		</div>
		<div id="destination" class="inline-flex justify-center items-center gap-1.5">
			<span class="material-symbols-outlined">location_on</span>
			<div class="text-xl">Sebi's House</div>
		</div>
		<div id="train-name" class="inline-flex justify-center items-center gap-1.5">
			<span class="material-symbols-outlined">train</span>
			<div class="text-xl">Class 2 Bajillion</div>
		</div>
		<div id="headcode" class="inline-flex justify-center items-center gap-1.5">
			<span class="material-symbols-outlined">pin</span>
			<div class="text-xl">1P11</div>
		</div>
		<div id="train-class" class="inline-flex justify-center items-center gap-1.5">
			<span class="material-symbols-outlined">tag</span>
			<div class="text-xl">Passenger</div>
		</div>
		<div id="server" class="inline-flex justify-center items-center gap-1.5">
			<span class="material-symbols-outlined">dns</span>
			<div class="text-xl">2832198b</div>
		</div>
	</div>

	<a class="fixed bottom-2 right-2 flex p-2 align-center bg-zinc-800 rounded-lg hidden z-20" target="_blank"
		href="https://map.dovedale.wiki" id="pop-out">
		<i class="material-symbols-outlined">arrow_outward</i>
	</a>

	<div
		class="fixed sm:bottom-2 bottom-4 sm:left-auto left-0 sm:right-3 right-0 flex gap-3 align-center sm:flex-row flex-col-reverse sm:justify-start justify-center sm:w-auto z-20">
		<button id="levers" class="hidden bg-zinc-800 px-3 py-1 rounded-lg">Levers</button>
		<p class="text-zinc-500 text-sm hidden sm:block" id="hover-hint">Hover over a dot to see the player's name</p>
	</div>
	<script src="index.js?v=18"></script>
</body>

</html>